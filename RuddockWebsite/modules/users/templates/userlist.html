{% extends "layout.html" %}

{% block body %}
  <script src="{{url_for('static', filename='js/sorttable.js')}}"></script>
  <h2>House Lists</h2>
  {# Show link to change current/alumni filtering #}
  {% if filterType == 'current' %}
    Currently showing only current students. View
    <a href="{{ url_for('users.show_users', filterType='all') }}">all Rudds</a> or
    <a href="{{ url_for('users.show_users', filterType='alumni') }}">only alumni</a>.
  {% elif filterType == 'alumni' %}
    Currently showing only alumni. View
    <a href="{{ url_for('users.show_users', filterType='all') }}">all Rudds</a> or
    <a href="{{ url_for('users.show_users', filterType='current') }}">only current students</a>.
  {% else %}
    Currently showing all Rudds. View only
    <a href="{{ url_for('users.show_users', filterType='current') }}">current students</a> or
    <a href="{{ url_for('users.show_users', filterType='alumni') }}">alumni</a>.
  {% endif %}
  Click on the columns to sort.
  <br><br>

  <table class="sortable userlist">
  {# First display header #}
    <thead style="cursor: pointer;">
      <tr>
        {% for field in fields %}
          {% if fieldMap[field] %} {# Only display not-null fields #}
            <th>{{ fieldMap[field] }}</th>
          {% endif %}
        {% endfor %}
      </tr>
    </thead>
  {# Now, display each row #}
  {% for result in data %}
  {% if idMap[result['user_id']] %}
  <tr class="link" onclick="location.href='{{ url_for('users.show_user_profile', 
    username=idMap[result['user_id']]) }}'">
  {% else %}
  <tr>
  {% endif %}
    {% for field in fields %}
    {% if fieldMap[field] %} {# Only display not-null fields #}
    <td>{{ result[field] }}</td>
    {% endif %}
    {% endfor %}
  </tr>
  {% endfor %}
  </table>

{% endblock body %}
